{"version":3,"sources":["./web/comfytwitch.js"],"names":["async","checkForTwitchToken","accessToken","localStorage","getItem","refreshToken","result","validateTwitchToken","login","token","comfyTwitchAuth","refreshUrl","Error","tokenData","fetch","then","r","json","access_token","setItem","refresh_token","err","console","error","checkTwitchTokenLocalStorage","nonce","URLSearchParams","location","search","get","storedNonce","window","checkAuthState","accessCode","hash","replace","codeAuthUrl","url","href","split","checkTwitchTokenURL","headers","Authorization","catch","UserId","User","ClientID","Token","RefreshToken","Scopes","Logout","removeItem","Login","clientId","redirectURI","scopes","type","state","charset","crypto","getRandomValues","Uint8Array","forEach","c","push","length","join","generateNonce","encodeURIComponent","SetAuthEndpoint","codeToTokenUrl","SetRefreshEndpoint","tokenRefreshUrl","Check","client_id","user_id","GetUser","userId","Client-ID","ComfyTwitch"],"mappings":"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"}