{"version":3,"sources":["./web/comfytwitch.js"],"names":["async","checkForTwitchToken","accessToken","localStorage","getItem","refreshToken","result","validateTwitchToken","login","token","comfyTwitchAuth","refreshUrl","Error","tokenData","fetch","then","r","json","access_token","setItem","refresh_token","err","console","error","checkTwitchTokenLocalStorage","nonce","URLSearchParams","location","search","get","storedNonce","window","checkAuthState","accessCode","hash","replace","codeAuthUrl","origin","pathname","url","href","split","checkTwitchTokenURL","headers","Authorization","catch","UserId","User","ClientID","Token","RefreshToken","Scopes","Logout","removeItem","Login","clientId","redirectURI","scopes","type","state","charset","crypto","getRandomValues","Uint8Array","forEach","c","push","length","join","generateNonce","encodeURIComponent","SetAuthEndpoint","codeToTokenUrl","SetRefreshEndpoint","tokenRefreshUrl","Check","client_id","user_id","GetUser","userId","Client-ID","ComfyTwitch"],"mappings":"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"}